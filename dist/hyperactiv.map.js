!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperactiv=t()}(this,function(){"use strict";const e=[],t=new WeakMap,n=function(e){return e&&"object"==typeof e&&!(e instanceof Date)},r=Array.isArray,o=function(e,t,r,u){Object.defineProperty(e,"__key",{value:t,enumerable:!1,configurable:!0}),Object.defineProperty(e,"__parent",{value:r,enumerable:!1,configurable:!0}),u&&Object.entries(e).forEach(function([t,r]){!n(r)||r.__key&&r.__parent||o(e[t],t,e)})},u={timeout:null,queue:new Set,process(){for(const e of u.queue)e();u.queue.clear(),u.timeout=null},enqueue(e){null===u.timeout&&(u.timeout=setTimeout(u.process,0)),u.queue.add(e)}},c=function(i,l={}){const{props:s=null,ignore:f=null,batch:a=!1,deep:_=!0,bubble:d=null,bind:p=!1}=l;if(i.__observed)return i;t.set(i,new Map),_&&Object.entries(i).forEach(function([e,t]){n(t)&&(i[e]=c(t,l),d&&o(i[e],e,i))});const b=new Proxy(i,{get(n,r){if("__observed"===r)return!0;if((!s||s.includes(r))&&(!f||!f.includes(r))&&e.length){const n=t.get(i);n.has(r)||n.set(r,new Set),n.get(r).add(e[0])}return i[r]},set(p,y,h){if("__handler"===y)Object.defineProperty(i,"__handler",{value:h,enumerable:!1,configurable:!0});else{const p=t.get(i);if((!r(i)||"length"!==y)&&i[y]===h)return!0;const g=i[y];if(n(g)&&(delete g.__key,delete g.__parent),i[y]=_&&n(h)?c(h,l):h,_&&n(h)&&(d||i.__parent)&&o(i[y],y,i,_),!i.__handler||!1!==i.__handler([y],h,g,b)){const e=[i.__key,y];let t=i.__parent;for(;t&&(!t.__handler||!1!==t.__handler(e,h,g,b));)t.__key&&t.__parent?(e.unshift(t.__key),t=t.__parent):t=null}if((!s||s.includes(y))&&(!f||!f.includes(y))&&p.has(y)){const t=p.get(y);for(const n of t)n.__disposed?t.delete(n):n!==e[0]&&(a?u.enqueue(n):n())}}return!0},deleteProperty(e,t){const r=e[t];return n(r)&&(delete r.__key,delete r.__parent),delete e[t],!0}});if(p){[...Object.getOwnPropertyNames(i),...Object.getPrototypeOf(i)&&["String","Number","Object","Array","Boolean","Date"].indexOf(Object.getPrototypeOf(i).constructor.name)<0?Object.getOwnPropertyNames(Object.getPrototypeOf(i)):[]].filter(e=>"constructor"!=e&&"function"==typeof i[e]).forEach(e=>i[e]=i[e].bind(b))}return b};return{observe:c,computed:function(t,{autoRun:n=!0,callback:r=null,bind:o=null}={}){const u=new Proxy(t,{apply(t,n,c){const i=function(i=null){e.unshift(r||u);const l=i?i():t.apply(o||n,c);return e.shift(),l};return c.push({computeAsync:function(e){return i(e)}}),i()}});return n&&u(),u},dispose:function(e){return e.__disposed=!0}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHlwZXJhY3Rpdi5tYXAuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb21wdXRlZFN0YWNrID0gW11cbmNvbnN0IG9ic2VydmVyc01hcCA9IG5ldyBXZWFrTWFwKClcblxuLyogVG9vbHMgKi9cblxuY29uc3QgaXNPYmogPSBmdW5jdGlvbihvKSB7IHJldHVybiBvICYmIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJiAhKG8gaW5zdGFuY2VvZiBEYXRlKSB9XG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheVxuY29uc3QgZGVmaW5lQnViYmxpbmdQcm9wZXJ0aWVzID0gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHBhcmVudCwgZGVlcCkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsICdfX2tleScsIHsgdmFsdWU6IGtleSwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsICdfX3BhcmVudCcsIHsgdmFsdWU6IHBhcmVudCwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KVxuICAgIGRlZXAgJiYgT2JqZWN0LmVudHJpZXMob2JqZWN0KS5mb3JFYWNoKGZ1bmN0aW9uKFtrZXksIHZhbF0pIHtcbiAgICAgICAgaWYoaXNPYmoodmFsKSAmJiAoIXZhbC5fX2tleSB8fCAhdmFsLl9fcGFyZW50KSkgZGVmaW5lQnViYmxpbmdQcm9wZXJ0aWVzKG9iamVjdFtrZXldLCBrZXksIG9iamVjdClcbiAgICB9KVxufVxuXG5jb25zdCBiYXRjaGVyID0ge1xuICAgIHRpbWVvdXQ6IG51bGwsXG4gICAgcXVldWU6IG5ldyBTZXQoKSxcbiAgICBwcm9jZXNzKCkge1xuICAgICAgICBmb3IoY29uc3QgdGFzayBvZiBiYXRjaGVyLnF1ZXVlKSB0YXNrKClcbiAgICAgICAgYmF0Y2hlci5xdWV1ZS5jbGVhcigpXG4gICAgICAgIGJhdGNoZXIudGltZW91dCA9IG51bGxcbiAgICB9LFxuICAgIGVucXVldWUodGFzaykge1xuICAgICAgICBpZihiYXRjaGVyLnRpbWVvdXQgPT09IG51bGwpXG4gICAgICAgICAgICBiYXRjaGVyLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGJhdGNoZXIucHJvY2VzcywgMClcbiAgICAgICAgYmF0Y2hlci5xdWV1ZS5hZGQodGFzaylcbiAgICB9XG59XG5cbi8qIENvbXB1dGVkICovXG5cbmNvbnN0IGNvbXB1dGVkID0gZnVuY3Rpb24oZnVuLCB7IGF1dG9SdW4gPSB0cnVlLCBjYWxsYmFjayA9IG51bGwsIGJpbmQgPSBudWxsIH0gPSB7fSkge1xuICAgIC8vIFByb3hpZnkgdGhlIGZ1bmN0aW9uIGluIG9yZGVyIHRvIGludGVyY2VwdCB0aGUgY2FsbHNcbiAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShmdW4sIHtcbiAgICAgICAgYXBwbHkodGFyZ2V0LCB0aGlzQXJnLCBhcmdzTGlzdCkge1xuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGZ1bmN0aW9uIHdoaWNoIGlzIGJlaW5nIGNvbXB1dGVkIGluc2lkZSBhIHN0YWNrXG4gICAgICAgICAgICBjb25zdCBwZXJmb3JtQ29tcHV0YXRpb24gPSBmdW5jdGlvbihmdW4gPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29tcHV0ZWRTdGFjay51bnNoaWZ0KGNhbGxiYWNrIHx8IHByb3h5KVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGZ1biA/IGZ1bigpIDogdGFyZ2V0LmFwcGx5KGJpbmQgfHwgdGhpc0FyZywgYXJnc0xpc3QpXG4gICAgICAgICAgICAgICAgY29tcHV0ZWRTdGFjay5zaGlmdCgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJbmplY3QgdGhlIGNvbXB1dGVBc3luYyBhcmd1bWVudCB3aGljaCBpcyB1c2VkIHRvIG1hbnVhbGx5IGRlY2xhcmUgd2hlbiB0aGUgY29tcHV0YXRpb24gdGFrZXMgcGFydFxuICAgICAgICAgICAgYXJnc0xpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgY29tcHV0ZUFzeW5jOiBmdW5jdGlvbih0YXJnZXQpIHsgcmV0dXJuIHBlcmZvcm1Db21wdXRhdGlvbih0YXJnZXQpIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJldHVybiBwZXJmb3JtQ29tcHV0YXRpb24oKVxuICAgICAgICB9XG4gICAgfSlcbiAgICAvLyBJZiBhdXRvUnVuLCB0aGVuIGNhbGwgdGhlIGZ1bmN0aW9uIGF0IG9uY2VcbiAgICBpZihhdXRvUnVuKSBwcm94eSgpXG4gICAgcmV0dXJuIHByb3h5XG59XG5cbi8qIERpc3Bvc2UgKi9cblxuLy8gVGhlIGRpc3Bvc2VkIGZsYWcgd2hpY2ggaXMgdXNlZCB0byByZW1vdmUgYSBjb21wdXRlZCBmdW5jdGlvbiByZWZlcmVuY2UgcG9pbnRlclxuY29uc3QgZGlzcG9zZSA9IGZ1bmN0aW9uKF8pIHsgcmV0dXJuIF8uX19kaXNwb3NlZCA9IHRydWUgfVxuXG4vKiBPYnNlcnZlICovXG5cbmNvbnN0IG9ic2VydmUgPSBmdW5jdGlvbihvYmosIG9wdGlvbnMgPSB7IH0pIHtcbiAgICAvLyAnZGVlcCcgaXMgc2xvd2VyIGJ1dCByZWFzb25hYmxlOyAnc2hhbGxvdycgYSBwZXJmb3JtYW5jZSBlbmhhbmNlbWVudCBidXQgd2l0aCBzaWRlLWVmZmVjdHNcbiAgICBjb25zdCB7XG4gICAgICAgIHByb3BzID0gbnVsbCwgaWdub3JlID0gbnVsbCwgYmF0Y2ggPSBmYWxzZSwgZGVlcCA9IHRydWUsIGJ1YmJsZSA9IG51bGwsIGJpbmQgPSBmYWxzZVxuICAgIH0gPSBvcHRpb25zXG5cbiAgICAvLyBJZ25vcmUgaWYgdGhlIG9iamVjdCBpcyBhbHJlYWR5IG9ic2VydmVkXG4gICAgaWYob2JqLl9fb2JzZXJ2ZWQpIHJldHVybiBvYmpcblxuICAgIC8vIEFkZCB0aGUgb2JqZWN0IHRvIHRoZSBvYnNlcnZlcnMgbWFwLlxuICAgIC8vIG9ic2VydmVyc01hcCBzaWduYXR1cmUgOiBNYXA8T2JqZWN0LCBNYXA8UHJvcGVydHksIFNldDxDb21wdXRlZCBmdW5jdGlvbj4+PlxuICAgIC8vIEluIGVuZ2xpc2ggOlxuICAgIC8vIG9ic2VydmVyc01hcCBpcyBhIG1hcCBvZiBvYnNlcnZlZCBvYmplY3RzLlxuICAgIC8vIEZvciBlYWNoIG9ic2VydmVkIG9iamVjdCwgZWFjaCBwcm9wZXJ0eSBpcyBtYXBwZWQgd2l0aCBhIHNldCBvZiBjb21wdXRlZCBmdW5jdGlvbnMgZGVwZW5kaW5nIG9uIHRoaXMgcHJvcGVydHkuXG4gICAgLy8gV2hlbmV2ZXIgYSBwcm9wZXJ0eSBpcyBzZXQsIHdlIHJlLXJ1biBlYWNoIG9uZSBvZiB0aGUgZnVuY3Rpb25zIHN0b3JlZCBpbnNpZGUgdGhlIG1hdGNoaW5nIFNldC5cbiAgICBvYnNlcnZlcnNNYXAuc2V0KG9iaiwgbmV3IE1hcCgpKVxuXG4gICAgLy8gSWYgdGhlIGRlZXAgZmxhZyBpcyBzZXQsIG9ic2VydmUgbmVzdGVkIG9iamVjdHMvYXJyYXlzXG4gICAgZGVlcCAmJiBPYmplY3QuZW50cmllcyhvYmopLmZvckVhY2goZnVuY3Rpb24oW2tleSwgdmFsXSkge1xuICAgICAgICBpZihpc09iaih2YWwpKSB7XG4gICAgICAgICAgICBvYmpba2V5XSA9IG9ic2VydmUodmFsLCBvcHRpb25zKVxuICAgICAgICAgICAgLy8gSWYgYnViYmxlIGlzIHNldCwgd2UgYWRkIGtleXMgdG8gdGhlIG9iamVjdCB1c2VkIHRvIGJ1YmJsZSB1cCB0aGUgbXV0YXRpb25cbiAgICAgICAgICAgIGlmKGJ1YmJsZSlcbiAgICAgICAgICAgICAgICBkZWZpbmVCdWJibGluZ1Byb3BlcnRpZXMob2JqW2tleV0sIGtleSwgb2JqKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIC8vIFByb3hpZnkgdGhlIG9iamVjdCBpbiBvcmRlciB0byBpbnRlcmNlcHQgZ2V0L3NldCBvbiBwcm9wc1xuICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KG9iaiwge1xuICAgICAgICBnZXQoXywgcHJvcCkge1xuICAgICAgICAgICAgaWYocHJvcCA9PT0gJ19fb2JzZXJ2ZWQnKSByZXR1cm4gdHJ1ZVxuXG4gICAgICAgICAgICAvLyBJZiB0aGUgcHJvcCBpcyB3YXRjaGVkXG4gICAgICAgICAgICBpZigoIXByb3BzIHx8IHByb3BzLmluY2x1ZGVzKHByb3ApKSAmJiAoIWlnbm9yZSB8fCAhaWdub3JlLmluY2x1ZGVzKHByb3ApKSkge1xuICAgICAgICAgICAgICAgIC8vIElmIGEgY29tcHV0ZWQgZnVuY3Rpb24gaXMgYmVpbmcgcnVuXG4gICAgICAgICAgICAgICAgaWYoY29tcHV0ZWRTdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydGllc01hcCA9IG9ic2VydmVyc01hcC5nZXQob2JqKVxuICAgICAgICAgICAgICAgICAgICBpZighcHJvcGVydGllc01hcC5oYXMocHJvcCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzTWFwLnNldChwcm9wLCBuZXcgU2V0KCkpXG4gICAgICAgICAgICAgICAgICAgIC8vIExpbmsgdGhlIGNvbXB1dGVkIGZ1bmN0aW9uIGFuZCB0aGUgcHJvcGVydHkgYmVpbmcgYWNjZXNzZWRcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllc01hcC5nZXQocHJvcCkuYWRkKGNvbXB1dGVkU3RhY2tbMF0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb2JqW3Byb3BdXG4gICAgICAgIH0sXG4gICAgICAgIHNldChfLCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICAgICAgLy8gRG9uJ3QgdHJhY2sgYnViYmxlIGhhbmRsZXJzXG4gICAgICAgICAgICBpZihwcm9wID09PSAnX19oYW5kbGVyJykge1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosICdfX2hhbmRsZXInLCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzTWFwID0gb2JzZXJ2ZXJzTWFwLmdldChvYmopXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5ldy9vbGQgdmFsdWUgYXJlIGVxdWFsLCByZXR1cm5cbiAgICAgICAgICAgICAgICBpZigoIWlzQXJyYXkob2JqKSB8fCBwcm9wICE9PSAnbGVuZ3RoJykgJiYgb2JqW3Byb3BdID09PSB2YWx1ZSkgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYnViYmxpbmcgaW5mcmFzdHJ1Y3R1cmUgYW5kIHBhc3Mgb2xkIHZhbHVlIHRvIGhhbmRsZXJzXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBvYmpbcHJvcF1cbiAgICAgICAgICAgICAgICBpZihpc09iaihvbGRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9sZFZhbHVlLl9fa2V5XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvbGRWYWx1ZS5fX3BhcmVudFxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBkZWVwIGZsYWcgaXMgc2V0IHdlIG9ic2VydmUgdGhlIG5ld2x5IHNldCB2YWx1ZVxuICAgICAgICAgICAgICAgIG9ialtwcm9wXSA9IGRlZXAgJiYgaXNPYmoodmFsdWUpID8gb2JzZXJ2ZSh2YWx1ZSwgb3B0aW9ucykgOiB2YWx1ZVxuICAgICAgICAgICAgICAgIC8vIENvLW9wdCBhc3NpZ25lZCBvYmplY3QgaW50byBidWJibGluZyBpZiBhcHByb3ByaWF0ZVxuICAgICAgICAgICAgICAgIGRlZXAgJiYgaXNPYmoodmFsdWUpICYmIChidWJibGUgfHwgb2JqLl9fcGFyZW50KSAmJiBkZWZpbmVCdWJibGluZ1Byb3BlcnRpZXMob2JqW3Byb3BdLCBwcm9wLCBvYmosIGRlZXApXG4gICAgICAgICAgICAgICAgLy8gSWYgaGFuZGxlciwgaW52b2tlIGNhbGxiYWNrOyBpZiBhIGhhbmRsZXIgZXhwbGljaXRseSByZXR1cm5zICdmYWxzZScgdGhlbiBzdG9wIHByb3BvZ2F0aW9uLCBsaWtlIGpRdWVyeVxuICAgICAgICAgICAgICAgIGlmKCFvYmouX19oYW5kbGVyIHx8IG9iai5fX2hhbmRsZXIoWyBwcm9wIF0sIHZhbHVlLCBvbGRWYWx1ZSwgcHJveHkpICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb250aW51ZSBwcm9wb2dhdGlvbiwgdHJhdmVyc2luZyB0aGUgbXV0YXRlZCBwcm9wZXJ0eSdzIG9iamVjdCBoaWVyYXJjaHkgJiBjYWxsIGFueSBfX2hhbmRsZXIncyBhbG9uZyB0aGUgd2F5XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuY2VzdHJ5ID0gWyBvYmouX19rZXksIHByb3AgXVxuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gb2JqLl9fcGFyZW50XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlKHBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYSBoYW5kbGVyIGV4cGxpY2l0bHkgcmV0dXJucyAnZmFsc2UnIHRoZW4gc3RvcCBwcm9wb2dhdGlvbiwgbGlrZSBqUXVlcnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBhcmVudC5fX2hhbmRsZXIgJiYgcGFyZW50Ll9faGFuZGxlcihhbmNlc3RyeSwgdmFsdWUsIG9sZFZhbHVlLCBwcm94eSkgPT09IGZhbHNlKSBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFyZW50Ll9fa2V5ICYmIHBhcmVudC5fX3BhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2VzdHJ5LnVuc2hpZnQocGFyZW50Ll9fa2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5fX3BhcmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHBhcmVudCA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBwcm9wIGlzIHdhdGNoZWRcbiAgICAgICAgICAgICAgICBpZigoIXByb3BzIHx8IHByb3BzLmluY2x1ZGVzKHByb3ApKSAmJiAoIWlnbm9yZSB8fCAhaWdub3JlLmluY2x1ZGVzKHByb3ApKSkge1xuICAgICAgICAgICAgICAgICAgICBpZihwcm9wZXJ0aWVzTWFwLmhhcyhwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmV0cmlldmUgdGhlIGNvbXB1dGVkIGZ1bmN0aW9ucyBkZXBlbmRpbmcgb24gdGhlIHByb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlcGVuZGVudHMgPSBwcm9wZXJ0aWVzTWFwLmdldChwcm9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGNvbnN0IGRlcGVuZGVudCBvZiBkZXBlbmRlbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgZGlzcG9zZWQsIGRlbGV0ZSB0aGUgZnVuY3Rpb24gcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGVwZW5kZW50Ll9fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwZW5kZW50cy5kZWxldGUoZGVwZW5kZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihkZXBlbmRlbnQgIT09IGNvbXB1dGVkU3RhY2tbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUnVuIHRoZSBjb21wdXRlZCBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihiYXRjaCkgYmF0Y2hlci5lbnF1ZXVlKGRlcGVuZGVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBkZXBlbmRlbnQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgZGVsZXRlUHJvcGVydHkoXywgcHJvcCkge1xuICAgICAgICAgICAgLy8gUHJldmVudCBidWJibGluZyBtdXRhdGlvbnMgZnJvbSBzdHJheSBvYmplY3RzXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IF9bcHJvcF1cbiAgICAgICAgICAgIGlmKGlzT2JqKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZS5fX2tleVxuICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZS5fX3BhcmVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsZXRlIF9bcHJvcF1cbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYoYmluZCkge1xuICAgICAgICAvLyBOZWVkIHRoaXMgZm9yIGJpbmRpbmcgZXM2IGNsYXNzZXMgbWV0aG9kcyB3aGljaCBhcmUgc3RvcmVkIGluIHRoZSBvYmplY3QgcHJvdG90eXBlXG4gICAgICAgIGNvbnN0IG1ldGhvZHMgPSBbXG4gICAgICAgICAgICAuLi5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLFxuICAgICAgICAgICAgLi4uT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgJiYgWydTdHJpbmcnLCAnTnVtYmVyJywgJ09iamVjdCcsICdBcnJheScsICdCb29sZWFuJywgJ0RhdGUnXS5pbmRleE9mKE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopLmNvbnN0cnVjdG9yLm5hbWUpIDwgMCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopKSA6IFtdXG4gICAgICAgIF0uZmlsdGVyKHByb3AgPT4gcHJvcCAhPSAnY29uc3RydWN0b3InICYmIHR5cGVvZiBvYmpbcHJvcF0gPT09ICdmdW5jdGlvbicpXG4gICAgICAgIG1ldGhvZHMuZm9yRWFjaChrZXkgPT4gb2JqW2tleV0gPSBvYmpba2V5XS5iaW5kKHByb3h5KSlcbiAgICB9XG5cbiAgICByZXR1cm4gcHJveHlcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIG9ic2VydmUsXG4gICAgY29tcHV0ZWQsXG4gICAgZGlzcG9zZVxufSJdLCJuYW1lcyI6WyJjb21wdXRlZFN0YWNrIiwib2JzZXJ2ZXJzTWFwIiwiV2Vha01hcCIsImlzT2JqIiwibyIsIkRhdGUiLCJpc0FycmF5IiwiQXJyYXkiLCJkZWZpbmVCdWJibGluZ1Byb3BlcnRpZXMiLCJvYmplY3QiLCJrZXkiLCJwYXJlbnQiLCJkZWVwIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJlbnRyaWVzIiwiZm9yRWFjaCIsInZhbCIsIl9fa2V5IiwiX19wYXJlbnQiLCJiYXRjaGVyIiwidGltZW91dCIsInF1ZXVlIiwiU2V0IiwiW29iamVjdCBPYmplY3RdIiwidGFzayIsImNsZWFyIiwic2V0VGltZW91dCIsInByb2Nlc3MiLCJhZGQiLCJvYnNlcnZlIiwib2JqIiwib3B0aW9ucyIsInByb3BzIiwiaWdub3JlIiwiYmF0Y2giLCJidWJibGUiLCJiaW5kIiwiX19vYnNlcnZlZCIsInNldCIsIk1hcCIsInByb3h5IiwiUHJveHkiLCJfIiwicHJvcCIsImluY2x1ZGVzIiwibGVuZ3RoIiwicHJvcGVydGllc01hcCIsImdldCIsImhhcyIsIm9sZFZhbHVlIiwiX19oYW5kbGVyIiwiYW5jZXN0cnkiLCJ1bnNoaWZ0IiwiZGVwZW5kZW50cyIsImRlcGVuZGVudCIsIl9fZGlzcG9zZWQiLCJkZWxldGUiLCJlbnF1ZXVlIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldFByb3RvdHlwZU9mIiwiaW5kZXhPZiIsImNvbnN0cnVjdG9yIiwibmFtZSIsImZpbHRlciIsImNvbXB1dGVkIiwiZnVuIiwiYXV0b1J1biIsImNhbGxiYWNrIiwidGFyZ2V0IiwidGhpc0FyZyIsImFyZ3NMaXN0IiwicGVyZm9ybUNvbXB1dGF0aW9uIiwicmVzdWx0IiwiYXBwbHkiLCJzaGlmdCIsInB1c2giLCJjb21wdXRlQXN5bmMiLCJkaXNwb3NlIl0sIm1hcHBpbmdzIjoic0xBQUEsTUFBTUEsS0FDQUMsRUFBZSxJQUFJQyxRQUluQkMsRUFBUSxTQUFTQyxHQUFLLE9BQU9BLEdBQWtCLGlCQUFOQSxLQUFvQkEsYUFBYUMsT0FDMUVDLEVBQVVDLE1BQU1ELFFBQ2hCRSxFQUEyQixTQUFTQyxFQUFRQyxFQUFLQyxFQUFRQyxHQUMzREMsT0FBT0MsZUFBZUwsRUFBUSxTQUFXTSxNQUFPTCxFQUFLTSxZQUFZLEVBQU9DLGNBQWMsSUFDdEZKLE9BQU9DLGVBQWVMLEVBQVEsWUFBY00sTUFBT0osRUFBUUssWUFBWSxFQUFPQyxjQUFjLElBQzVGTCxHQUFRQyxPQUFPSyxRQUFRVCxHQUFRVSxRQUFRLFVBQVVULEVBQUtVLEtBQy9DakIsRUFBTWlCLElBQVVBLEVBQUlDLE9BQVVELEVBQUlFLFVBQVdkLEVBQXlCQyxFQUFPQyxHQUFNQSxFQUFLRCxNQUk3RmMsR0FDRkMsUUFBUyxLQUNUQyxNQUFPLElBQUlDLElBQ1hDLFVBQ0ksSUFBSSxNQUFNQyxLQUFRTCxFQUFRRSxNQUFPRyxJQUNqQ0wsRUFBUUUsTUFBTUksUUFDZE4sRUFBUUMsUUFBVSxNQUV0QkcsUUFBUUMsR0FDbUIsT0FBcEJMLEVBQVFDLFVBQ1BELEVBQVFDLFFBQVVNLFdBQVdQLEVBQVFRLFFBQVMsSUFDbERSLEVBQVFFLE1BQU1PLElBQUlKLEtBc0NwQkssRUFBVSxTQUFTQyxFQUFLQyxNQUUxQixNQUFNQyxNQUNGQSxFQUFRLEtBQUlD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
